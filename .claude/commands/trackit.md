---
name: trackit
description: Monitor any long-running job, handle failures, and create a PR with results when done. Use when the user says "trackit" for any job they want tracked — sbatch, background process, or multi-step pipeline.
tools: Read, Write, Edit, Bash, Glob, Grep, Task
---

Track a long-running job to completion and create a PR with results.

## How to get context

1. Identify what's running: SLURM job ID, background PID, or a command to launch
2. Find the experiment doc (usually in `docs/`) and results directory
3. Determine how to check status and where logs/results land

## Steps

1. **Launch** (if not already running): submit the job or start the process
2. **Monitor**: Poll status until completion
   - SLURM: `squeue -u $USER`, then `sacct -j <jobid> --format=JobID,State,ExitCode,Elapsed`
   - Background process: `ps -p <pid>`, check log files
   - Any job: check output files, log tails, exit codes
3. **Diagnose failures**: If it failed, read logs, fix the issue, relaunch. Repeat up to 3 times.
4. **Collect results**: Read output files (json, jsonl, csv, logs, etc.)
5. **Update docs**: Add a results table to the experiment's `.md` file
6. **Create PR**:
   - `module load gh` (on Sherlock) or use `gh` directly
   - Branch: `git checkout -b results/<experiment>-<date>`
   - Commit updated docs and results
   - `gh pr create`

## PR format

```bash
gh pr create \
  --title "Results: <experiment name>" \
  --body "$(cat <<'EOF'
## Summary
<1-3 bullet points with key metrics>

## Results
<paste the results table>

Generated by /trackit skill.
EOF
)"
```

## Failure handling

- Read error logs to diagnose
- Common issues: OOM, missing deps, path errors, timeouts, container failures
- Fix and relaunch, up to 3 attempts
- After 3 failures, write a failure report and create the PR anyway

## Important

- Do NOT ask the user for feedback during monitoring — handle issues autonomously
- Use `module load gh` on Sherlock for GitHub CLI
- Commit with `Co-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>`

Report at the end with a concise summary and a link to the PR.
